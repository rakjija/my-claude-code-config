# 워크플로우 규칙

## 피처 개발 워크플로우

### 1. 기획

- 입력값, 출력값, 주요 로직 명확히 정의
- 테스트 케이스 함께 정의
- 기획 디테일 ↑ = AI 코드 품질 ↑

### 2. 테스트 작성 (TDD RED)

@rules/tdd.md 참고

### 3. 개발 (TDD GREEN + REFACTOR)

AI 코드 생성 시 내재화 프로세스 적용:

**즉시 이해**

- 블록(함수/섹션) 단위로 "이 부분이 뭐 하는 건지" 설명 제안
- 호출부 흐름도 함께 안내
- 사용자가 이해 못하면 추가 설명

**설명 포함 항목**

- 입력값, 출력값
- 중간 처리 로직
- 조건문/루프 분기 이유
- 호출부 위치와 사용 방식

### 4. 테스트 실행

- 테스트 통과 확인

### 5. 린팅/포매팅

@rules/git.md 작업 순서 참고

### 6. 빌드

- 빌드 성공 확인

### 7. AI 코드 리뷰

Codex CLI 사용:

```bash
# 커밋 전 변경사항 리뷰
codex review --uncommitted

# 특정 브랜치 대비 리뷰
codex review --base main
```

- 보안 취약점, 버그, 성능 이슈 확인
- 지적 사항 수정 후 다시 리뷰
- 자가 리뷰 전 사전 검증

### 8. 자가 리뷰 (내재화 확인)

#### 8-1. 주요 포인트 퀴즈

Claude가 질문:

- "이 함수의 입력값과 출력값은?"
- "이 조건문이 왜 필요해?"
- "호출부가 어디고 어떻게 사용돼?"

#### 8-2. 전체 포인트 해설

- 입력 → 처리 → 출력 흐름 설명
- 호출부 3개 따라가기
- 디버거로 변수 값 따라가기
- 조건문/루프에서 "왜 이렇게 분기했나" 확인

**체크리스트**

- [ ] 퀴즈 질문에 답할 수 있는가
- [ ] 각 블록 "뭐 하는 거?" 설명 가능한가
- [ ] 호출부 흐름이 보이는가
- [ ] "왜?" 질문에 답할 수 있는가

### 9. 커밋/푸시

@rules/git.md 참고

## 동료 리뷰

- "이 부분은 왜 이렇게 설계했어요?" 질문에 답할 수 있는 상태로 진입
- 막히면 리뷰어와 함께 파기 → 가장 강력한 학습

## 변형 문제 (선택)

- 비슷한 로직을 AI 없이 직접 짜보기
- 막히면 그때 AI나 기존 코드 참고
- 가장 강력한 내재화

## DevOps/인프라 우선순위

### 높음

- Terraform, Helm, 스크립트 (IaC)
- CI/CD 파이프라인
- 흐름 추적 필수

### 낮음

- 복잡한 애플리케이션 로직
- "대강 뭐 하는 건지" 정도면 OK
- 시스템 흐름 파악 > 코드 읽기

## 타임라인

```
기획 + 테스트 작성  : 30분
개발 + 테스트 실행  : 30분
린팅/포매팅/빌드    : 5분
AI 코드 리뷰        : 5분
자가 리뷰           : 5~10분
동료 리뷰           : 20~30분
────────────────────────────
총                  : 1.5~2시간
```
