# 워크플로우 규칙

## 피처 개발 워크플로우

### 1. 기획

@rules/planning.md 참고

### 2. 스펙 정의

@rules/spec.md 참고

### 3. 테스트 작성 (TDD RED)

@rules/tdd.md 참고

### 4. 개발 (TDD GREEN + REFACTOR)

AI 코드 생성 시 내재화 프로세스 적용:

**즉시 이해**

- 블록(함수/섹션) 단위로 "이 부분이 뭐 하는 건지" 설명 제안
- 호출부 흐름도 함께 안내
- 사용자가 이해 못하면 추가 설명

**설명 포함 항목**

- 입력값, 출력값
- 중간 처리 로직
- 조건문/루프 분기 이유
- 호출부 위치와 사용 방식

### 5. 테스트 실행

- 테스트 통과 확인

### 6. 린팅/포매팅

@rules/git.md 작업 순서 참고

### 7. 빌드

- 빌드 성공 확인

### 8. AI 코드 리뷰

Codex CLI 사용:

```bash
# 커밋 전 변경사항 리뷰
codex review --uncommitted

# 특정 브랜치 대비 리뷰
codex review --base main
```

- 보안 취약점, 버그, 성능 이슈 확인
- 지적 사항 수정 후 다시 리뷰
- 자가 리뷰 전 사전 검증

### 9. 자가 리뷰 (내재화 확인)

@rules/internalize.md 참고

### 10. 커밋/푸시

@rules/git.md 참고

## 동료 리뷰

- "이 부분은 왜 이렇게 설계했어요?" 질문에 답할 수 있는 상태로 진입
- 막히면 리뷰어와 함께 파기 → 가장 강력한 학습

## 변형 문제 (선택)

- 비슷한 로직을 AI 없이 직접 짜보기
- 막히면 그때 AI나 기존 코드 참고
- 가장 강력한 내재화

## DevOps/인프라 우선순위

### 높음

- Terraform, Helm, 스크립트 (IaC)
- CI/CD 파이프라인
- 흐름 추적 필수

### 낮음

- 복잡한 애플리케이션 로직
- "대강 뭐 하는 건지" 정도면 OK
- 시스템 흐름 파악 > 코드 읽기

## 타임라인

```
기획 + 스펙 정의    : 30분
테스트 작성 + 개발  : 30분
테스트 실행         : 5분
린팅/포매팅/빌드    : 5분
AI 코드 리뷰        : 5분
자가 리뷰           : 5~10분
동료 리뷰           : 20~30분
────────────────────────────
총                  : 1.5~2시간
```

## 체크리스트 (10단계 확인)

- [ ] 1. 기획 (@rules/planning.md)
- [ ] 2. 스펙 정의 (@rules/spec.md)
- [ ] 3. 테스트 작성 (@rules/tdd.md RED)
- [ ] 4. 개발 (GREEN + REFACTOR)
- [ ] 5. 테스트 실행
- [ ] 6. 린팅/포매팅
- [ ] 7. 빌드
- [ ] 8. AI 코드 리뷰 (Codex)
- [ ] 9. 자가 리뷰 (@rules/internalize.md)
- [ ] 10. 커밋/푸시 (@rules/git.md)

---

## 버그 수정 워크플로우

피처 개발보다 간소화된 버전

### 1. 문제 정의

- 뭐가 잘못됐나? (증상)
- 재현 방법은?

### 2. 원인 분석

- 왜 잘못됐나? (로그, 코드 추적)
- 근본 원인은?

### 3. 테스트 케이스

- 버그 재현 테스트 작성 (있으면)
- 수정 후 통과 확인용

### 4. 수정

- 최소 범위로 수정
- 사이드 이펙트 확인

### 5. 검증

- 테스트 실행
- 빌드 확인
- codex review --uncommitted

### 6. 자가 리뷰 (간소화)

퀴즈 1~2개:

- "이번 수정의 핵심이 뭐야?"
- "왜 이 방식으로 수정했어?"

### 7. 커밋/푸시

@rules/git.md 참고

### 버그 수정 타임라인

```
문제 정의 + 원인 분석  : 15분
수정 + 검증            : 15분
자가 리뷰              : 5분
───────────────────────────
총                     : 30~40분
```
